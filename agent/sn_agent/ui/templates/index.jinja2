<html>

<head>

</head>
<body>
<button onclick="sendMessage()">Can Perform</button>
<button onclick="sendPerformMessage()">Perform</button>

<script>
    var ws = new WebSocket('ws://localhost:9050/api/ws');

    ws.onopen = function () {
        // Web Socket is connected, send data using send()
        //ws.send("Message to send");
        console.log('Connection Opened');
    };

    ws.onmessage = function (evt) {
        var received_msg = evt.data;
        console.log(received_msg);
    };

    ws.onclose = function () {
        console.log("Connection is closed...");
    };

    window.onbeforeunload = function (event) {
        socket.close();
    };

    ws.onerror = function (a, b, c, d) {
        console.log(a);
        console.log(b);
        console.log(c);
        console.log(d);
    };

    function sendMessage() {
        var request = {
            "jsonrpc": "2.0",
            "method": "can_perform",
            "params": {
                "service_node_id": "deadbeef-aaaa-bbbb-cccc-000000000001"
            },
            "id": 3
        };
        var data = ws.send(JSON.stringify(request));
        console.log(data);
    }

    function sendPerformMessage() {
        var data = ws.send('{"jsonrpc": "2.0", "method": "perform", "params": {' +
            '"service_node_id":"deadbeef-aaaa-bbbb-cccc-000000000001", ' +
            '"job_params":[{"input_type": "file","input_url": "http://test.com/inputs/test_input.txt","output_type": "file_url_put","output_url": "test_output.txt"}]' +
            '}, "id":3}');
        console.log(data);
    }
</script>

Back to basics
</body>
</html>
